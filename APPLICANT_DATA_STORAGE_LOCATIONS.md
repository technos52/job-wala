# ğŸ“‹ Applicant Data Storage Locations

## ğŸ¯ Where Applicant Data is Saved

When a candidate applies for a job, their data is stored in **TWO Firebase Firestore collections**:

---

## ğŸ“ **1. Job Applications Collection**

### **Collection Name**: `job_applications`
### **Firebase Path**: `FirebaseFirestore.instance.collection('job_applications')`
### **Document ID**: Auto-generated by Firebase
### **Purpose**: Stores individual job application records

### **Data Structure**:
```dart
{
  // Job Information
  'jobId': 'job_document_id',                    // Reference to the job
  'jobTitle': 'Software Engineer',               // Job title
  'companyName': 'Tech Corp',                    // Company name
  
  // Basic Application Info
  'candidateEmail': 'candidate@example.com',     // From Firebase Auth
  'candidateName': 'John Doe',                   // Candidate's display name
  'appliedAt': FieldValue.serverTimestamp(),     // Application timestamp
  'status': 'pending',                           // Application status
  
  // Enhanced Candidate Info (from candidate profile)
  'candidatePhone': '+1234567890',               // Phone number
  'candidateAge': '25',                          // Age as string
  'candidateGender': 'Male',                     // Gender
  'candidateLocation': 'San Francisco, California', // Location
  'candidateQualification': 'Bachelor\'s Degree', // Education
  'candidateExperience': '3 years, 6 months',   // Work experience
  'candidateMaritalStatus': 'Single',           // Marital status
  'candidateCompanyType': 'Private',            // Preferred company type
  'candidateJobCategory': 'Information Technology', // Job category
  'candidateDesignation': 'Software Engineer',  // Current designation
  'candidateCurrentlyWorking': 'yes',           // Employment status
  'candidateNoticePeriod': '30',                // Notice period in days
}
```

### **How to Query**:
```dart
// Get all applications for a specific job
FirebaseFirestore.instance
  .collection('job_applications')
  .where('jobId', isEqualTo: jobId)
  .get()

// Get all applications by a candidate
FirebaseFirestore.instance
  .collection('job_applications')
  .where('candidateEmail', isEqualTo: candidateEmail)
  .get()
```

---

## ğŸ“ **2. Candidate Profile Collection**

### **Collection Name**: `candidates`
### **Firebase Path**: `FirebaseFirestore.instance.collection('candidates')`
### **Document ID**: Candidate's mobile number or Firebase UID
### **Purpose**: Stores complete candidate profile information

### **Data Structure**:
```dart
{
  // Step 1: Basic Information
  'fullName': 'John Doe',
  'mobileNumber': '+1234567890',
  'age': 25,
  'gender': 'Male',
  'email': 'john@example.com',
  
  // Step 2: Professional Details
  'qualification': 'Bachelor\'s Degree (Computer Science)',
  'experienceYears': 3,
  'experienceMonths': 6,
  'jobCategory': 'Information Technology',
  'jobType': 'Full Time',
  'designation': 'Software Engineer',
  'companyName': 'Tech Corp',
  'companyType': 'Private',
  'currentlyWorking': 'yes',
  'noticePeriod': 30,
  
  // Step 3: Personal Details
  'maritalStatus': 'Single',
  'state': 'California',
  'district': 'San Francisco',
  
  // System Fields
  'emailVerified': true,
  'registrationComplete': true,
  'step': 3,
  'createdAt': Timestamp,
  'updatedAt': Timestamp,
}
```

### **How to Query**:
```dart
// Get candidate profile by mobile number
FirebaseFirestore.instance
  .collection('candidates')
  .doc(mobileNumber)
  .get()

// Get candidate profile by email
FirebaseFirestore.instance
  .collection('candidates')
  .where('email', isEqualTo: email)
  .limit(1)
  .get()
```

---

## ğŸ”„ **Data Flow Process**

### **When Candidate Applies**:
1. **Authentication Check**: Verify user is logged in
2. **Profile Retrieval**: Load candidate data from `candidates` collection
3. **Data Combination**: Merge job info + candidate profile data
4. **Application Creation**: Save comprehensive data to `job_applications` collection
5. **Status Update**: Update local state to show "Applied" status

### **When Employer Views Applications**:
1. **Query Applications**: Get all applications for specific job from `job_applications`
2. **Enrich Data**: For each application, fetch additional candidate details from `candidates`
3. **Display**: Show comprehensive applicant information in UI

---

## ğŸ“Š **Implementation Files**

### **Application Creation**:
- **File**: `lib/simple_candidate_dashboard.dart`
- **Method**: `_applyForJob(Map<String, dynamic> job)`
- **Line**: ~2538

### **Application Viewing**:
- **File**: `lib/screens/job_applications_screen.dart`
- **Method**: `_loadJobApplications()`
- **Line**: ~25

---

## ğŸ” **Firebase Console Locations**

### **To View in Firebase Console**:

1. **Job Applications**:
   - Navigate to: `Firestore Database > job_applications`
   - Each document represents one job application
   - Document ID is auto-generated

2. **Candidate Profiles**:
   - Navigate to: `Firestore Database > candidates`
   - Each document represents one candidate
   - Document ID is the candidate's mobile number

---

## ğŸ“ˆ **Data Relationships**

```
Job Applications Collection
â”œâ”€â”€ Document 1 (auto-generated ID)
â”‚   â”œâ”€â”€ jobId: "job123" â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   â”œâ”€â”€ candidateEmail: "user@example.com" â”€â”€â”
â”‚   â””â”€â”€ [application data]                   â”‚
â”‚                                           â”‚
â”œâ”€â”€ Document 2 (auto-generated ID)          â”‚
â”‚   â”œâ”€â”€ jobId: "job456"                     â”‚
â”‚   â”œâ”€â”€ candidateEmail: "user2@example.com" â”‚
â”‚   â””â”€â”€ [application data]                  â”‚
â”‚                                           â”‚
â””â”€â”€ ...                                     â”‚
                                           â”‚
Jobs Collection                             â”‚
â”œâ”€â”€ job123 â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”œâ”€â”€ job456
â””â”€â”€ ...

Candidates Collection
â”œâ”€â”€ +1234567890 â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â”‚   â”œâ”€â”€ email: "user@example.com"
â”‚   â”œâ”€â”€ fullName: "John Doe"
â”‚   â””â”€â”€ [profile data]
â”œâ”€â”€ +0987654321
â””â”€â”€ ...
```

---

## ğŸ¯ **Key Points**

1. **Dual Storage**: Application data is stored in both collections for different purposes
2. **Rich Data**: Applications include comprehensive candidate information
3. **Real-time**: Data is fetched in real-time when employers view applications
4. **Scalable**: Structure supports multiple applications per candidate and per job
5. **Queryable**: Easy to query by job, candidate, or status

---

## ğŸ”§ **Database Indexes Recommended**

For optimal performance, create these Firestore indexes:

```
Collection: job_applications
- jobId (Ascending) + appliedAt (Descending)
- candidateEmail (Ascending) + appliedAt (Descending)
- status (Ascending) + appliedAt (Descending)

Collection: candidates
- email (Ascending)
- mobileNumber (Ascending)
```

This structure ensures efficient querying and comprehensive data storage for the job application system.